<?xml version="1.0" encoding="UTF-8"?>
<!--
  Created by IntelliJ IDEA.
  User: maria
  Date: 2019-03-27
  Time: 13:14
-->
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Książki</title>
</h:head>

<h:body>
    <h1>Biblioteka:</h1><br/>
    <h:form>
        <p>Wybierz kategorię danych:</p>
        <h:selectOneRadio id = "type" value="#{Controller.type}" validatorMessage="Zaznacz typ">
            <f:validateRequired/>
            <f:selectItems value = "#{Controller.data_type}"/>
            <f:ajax listener="#{Controller.initializeSpecified}" render="typeForm" />
        </h:selectOneRadio>
        <br/><br/>
        <h:panelGroup id = "typeForm">
        <h:panelGroup rendered="#{Controller.render3}">

        <h:dataTable value = "#{KsiazkaDB.books}" var = "book"
                 styleClass = "bookTable"
                 headerClass = "bookTableHeader"
                 rowClasses = "bookTableOddRow,bookTableEvenRow">
            <h:column>
                <f:facet name = "header">Id ksiazki</f:facet>
                #{book.id}
            </h:column>
        <h:column>
            <f:facet name = "header">Tytul</f:facet>
            #{book.tytul}
        </h:column>

        <h:column>
            <f:facet name = "header">Autor</f:facet>
            #{book.autor.name}
        </h:column>
            <h:column>
            <f:facet name = "header">Usunięcie</f:facet>
            <h:commandButton value="Usuń" action="#{KsiazkaDB.deleteBook(book)}" ></h:commandButton>
        </h:column>
            <h:column>
                <f:facet name = "header">Edycja</f:facet>
                <h:commandButton value="Edytuj" action="#{KsiazkaDB.editBook(book)}" ></h:commandButton>
            </h:column>
    </h:dataTable>
        <br/><br/>
        </h:panelGroup>
        <h:panelGroup rendered="#{Controller.render1}">
            <h:dataTable value = "#{WypozyczenieDB.rentals}" var = "rental"
                         styleClass = "bookTable"
                         headerClass = "bookTableHeader"
                         rowClasses = "bookTableOddRow,bookTableEvenRow">
                <h:column>
                    <f:facet name = "header">Id wypożyczenia</f:facet>
                    #{rental.id}
            </h:column>
                <h:column>
                    <f:facet name = "header">Id czytelnika</f:facet>
                    #{rental.czytelnik.id_czytelnika}
                </h:column>
                <h:column>
                    <f:facet name = "header">Id ksiazki</f:facet>
                    #{rental.ksiazka.id}
                </h:column>
                <h:column>
                    <f:facet name = "header">Data wypożyczenia</f:facet>
                    #{rental.wypozyczenie}
                </h:column>
                <h:column>
                    <f:facet name = "header">Data oddania</f:facet>
                    #{rental.oddania}
                </h:column>
            <h:column>
                <f:facet name = "header">Usunięcie</f:facet>
                <h:commandButton value="Usuń" action="#{Manager.deleteBook(book)}" ></h:commandButton>
            </h:column>
            <h:column>
                <f:facet name = "header">Edycja</f:facet>
                <h:commandButton value="Edytuj" action="#{Manager.editBook(book)}" ></h:commandButton>
            </h:column>
            </h:dataTable>
        </h:panelGroup>
        <h:panelGroup rendered="#{Controller.render2}">
            <h:dataTable value = "#{CzytelnikDB.readers}" var = "reader"
                         styleClass = "bookTable"
                         headerClass = "bookTableHeader"
                         rowClasses = "bookTableOddRow,bookTableEvenRow">
                <h:column>
                    <f:facet name = "header">Id</f:facet>
                    #{reader.id_czytelnika}
                </h:column>
                <h:column>
                    <f:facet name = "header">Imię</f:facet>
                    #{reader.name}
                </h:column>
                <h:column>
                    <f:facet name = "header">Nazwisko</f:facet>
                    #{reader.surname}
                </h:column>
                <h:column>
                    <f:facet name = "header">Usunięcie</f:facet>
                    <h:commandButton value="Usuń" action="#{CzytelnikDB.deleteReader(reader)}" ></h:commandButton>
                </h:column>
                <h:column>
                    <f:facet name = "header">Edycja</f:facet>
                    <h:commandButton value="Edytuj" action="#{CzytelnikDB.editReader(reader)}" ></h:commandButton>
                </h:column>
            </h:dataTable>
        </h:panelGroup>
        <h:panelGroup rendered="#{Controller.render4}">
            <h:dataTable value = "#{AutorDB.authors}" var = "author"
                         styleClass = "bookTable"
                         headerClass = "bookTableHeader"
                         rowClasses = "bookTableOddRow,bookTableEvenRow">
                <h:column>
                    <f:facet name = "header">Id</f:facet>
                    #{author.id_autora}
                </h:column>
                <h:column>
                    <f:facet name = "header">Autor</f:facet>
                    #{author.name}
                </h:column>
                <h:column>
                    <f:facet name = "header">Usunięcie</f:facet>
                    <h:commandButton value="Usuń" action="#{AutorDB.deleteAuthor(author)}" ></h:commandButton>
                </h:column>
                <h:column>
                    <f:facet name = "header">Edycja</f:facet>
                    <h:commandButton value="Edytuj" action="#{AutorDB.setEditedAutor(author)}" ></h:commandButton>
                </h:column>
            </h:dataTable>
        </h:panelGroup>
        </h:panelGroup>
        <h:commandButton value="Dodaj nową pozycję" action="add" ></h:commandButton>
    </h:form>
</h:body>

</html>